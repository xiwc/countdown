<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <title>倒计时</title>
    <link rel="stylesheet" href="css/TimeCircles.css" />
    <link rel="stylesheet" href="semantic/css/semantic.css">
</head>

<body style="background: gray;">
    <h1 style="margin: 40px; font: 32px Microsoft Yahei; text-align: center;">演讲倒计时</h1>
    <div id="countDownTimer" data-timer="300" style="width: 500px; height: 250px; margin: 0 auto;"></div>
    <div style="height: 50px;"></div>
    <div style="text-align: center;">
        <div id="btnStartOrStop" class="ui vertical animated button big green">
            <div class="hidden content">开始</div>
            <div class="visible content">
                <i class="play sign icon"></i>
            </div>
        </div>
        <div id="btnRestart" class="ui animated fade button big red">
            <div class="visible content">重新开始</div>
            <div class="hidden content">
                重新开始
            </div>
        </div>
    </div>

    <h1 id="txtWarning" style="margin: 40px; font: 32px Microsoft Yahei; text-align: center; color: red;"></h1>

    <audio id="alarm-ring" preload>
        <source src="media/ticktac.mp3" type="audio/mpeg" />
        <source src="media/ticktac.ogg" type="audio/ogg" />
    </audio>

    <script src="js/jquery.js"></script>
    <script src="js/TimeCircles.js"></script>
    <script src="semantic/javascript/semantic.js"></script>
    <script>
    $(function() {

        $('#countDownTimer').TimeCircles({
            start: false,
            animation: "smooth",
            count_past_zero: false,
            time: {
                Days: {
                    show: false
                },
                Hours: {
                    show: false
                },
                Minutes: {
                    show: true,
                    text: "分",
                    color: "#BFB"
                },
                Seconds: {
                    show: true,
                    text: "秒",
                    color: "#F99"
                }
            }
        });

        $("#countDownTimer").TimeCircles().addListener(function(unit, value, total) {
            if (total == 120) {
                document.getElementById('alarm-ring').play();
            }

            if (total == 0) {
                document.getElementById('alarm-ring').play();
                $('#txtWarning').text('演讲结束');
            }
        });

        $('#btnStartOrStop').click(function() {

            if ($(this).find('.hidden.content').text() == '开始') {
                $(this).find('.hidden.content').text('暂停');
                $(this).find('.visible.content').html('<i class="pause icon"></i>');
                $('#countDownTimer').TimeCircles().start();
            } else {
                $(this).find('.hidden.content').text('开始');
                $(this).find('.visible.content').html('<i class="play sign icon"></i>');
                $('#countDownTimer').TimeCircles().stop();
            }
        });
        $('#btnRestart').click(function() {
            $('#countDownTimer').TimeCircles().restart();
            $('#txtWarning').text('');

            if ($('#btnStartOrStop').find('.hidden.content').text() == '开始') {
                $('#btnStartOrStop').find('.hidden.content').text('暂停');
                $('#btnStartOrStop').find('.visible.content').html('<i class="pause icon"></i>');
            }
        });
    });
    </script>
</body>

</html>
